# ğŸ” **PLANO DE TESTES E REPAROS: CADEIA DE COMANDO**

## âœ… **SISTEMA DE ESPIÃ•ES IMPLEMENTADO**

### **ğŸ“‹ VISÃƒO GERAL:**

Implementei exatamente o plano de testes que vocÃª especificou. Agora temos trÃªs espiÃµes estratÃ©gicos posicionados em pontos crÃ­ticos da cadeia de comando para identificar onde estÃ¡ a falha.

---

## ğŸ•µï¸ **OS TRÃŠS ESPIÃ•ES IMPLEMENTADOS:**

### **ğŸ“» EspiÃ£o 1: VerificaÃ§Ã£o de Alvo**
**LocalizaÃ§Ã£o:** `obj_infantaria/Step_0.gml` (quando clicado)
**Mensagem:** `[TESTE 1] Ordem para criar menu. Enviando meu ID: X`
**FunÃ§Ã£o:** Confirma que o soldado estÃ¡ enviando seu ID corretamente

### **ğŸ”§ EspiÃ£o 2: VerificaÃ§Ã£o de TransmissÃ£o**
**LocalizaÃ§Ã£o:** `obj_menu_de_acao/Step_0.gml` (clique no botÃ£o PATRULHAR)
**Mensagem:** `[TESTE 2] BotÃ£o Patrulhar clicado! Ativando modo para unidade: X`
**FunÃ§Ã£o:** Confirma que o menu estÃ¡ transmitindo a ordem

### **ğŸ‘‚ EspiÃ£o 3A: VerificaÃ§Ã£o de MudanÃ§a de Estado**
**LocalizaÃ§Ã£o:** `obj_controlador_unidades/Step_0.gml` (clique direito para finalizar)
**Mensagem:** `[TESTE 3A] Rota finalizada. Estado da unidade X mudado para 'patrulhando'.`
**FunÃ§Ã£o:** Confirma que o estado foi alterado corretamente

### **ğŸ‘‚ EspiÃ£o 3B: VerificaÃ§Ã£o de ExecuÃ§Ã£o**
**LocalizaÃ§Ã£o:** `obj_infantaria/Step_0.gml` (case "patrulhando")
**Mensagem:** `[TESTE 3B] Unidade X estÃ¡ executando o estado 'patrulhando'.`
**FunÃ§Ã£o:** Confirma que a unidade estÃ¡ executando a patrulha

---

## ğŸ® **COMO EXECUTAR OS TESTES:**

### **ğŸ§ª Teste 1: VerificaÃ§Ã£o de Alvo**
1. **Execute o jogo**
2. **Clique em uma unidade de infantaria**
3. **Verifique no console:**
   ```
   [TESTE 1] Ordem para criar menu. Enviando meu ID: 100021
   ```
4. **Resultado esperado:** Mensagem aparece com um nÃºmero de ID

### **ğŸ§ª Teste 2: VerificaÃ§Ã£o de TransmissÃ£o**
1. **ApÃ³s o Teste 1 passar**
2. **Clique no botÃ£o "PATRULHAR" no menu**
3. **Verifique no console:**
   ```
   [TESTE 2] BotÃ£o Patrulhar clicado! Ativando modo para unidade: 100021
   ```
4. **Resultado esperado:** Mesmo ID do Teste 1

### **ğŸ§ª Teste 3: VerificaÃ§Ã£o de ExecuÃ§Ã£o**
1. **ApÃ³s o Teste 2 passar**
2. **Clique esquerdo em pontos do mapa** (adicionar Ã  rota)
3. **Clique direito** (finalizar patrulha)
4. **Verifique no console:**
   ```
   [TESTE 3A] Rota finalizada. Estado da unidade 100021 mudado para 'patrulhando'.
   [TESTE 3B] Unidade 100021 estÃ¡ executando o estado 'patrulhando'.
   ```
5. **Resultado esperado:** Ambas as mensagens aparecem

---

## ğŸ” **DIAGNÃ“STICO DE FALHAS:**

### **âŒ Se o Teste 1 falhar:**
- **Problema:** Evento de clique nÃ£o estÃ¡ sendo registrado
- **PossÃ­veis causas:**
  - Interface invisÃ­vel bloqueando o clique
  - `raio_selecao` muito pequeno
  - Unidade nÃ£o estÃ¡ sendo detectada

### **âŒ Se o Teste 2 falhar:**
- **Problema:** BotÃ£o "Patrulhar" nÃ£o estÃ¡ funcionando
- **PossÃ­veis causas:**
  - LÃ³gica de detecÃ§Ã£o de clique do botÃ£o quebrada
  - VariÃ¡vel `unidade_alvo` nÃ£o estÃ¡ sendo definida
  - Menu nÃ£o estÃ¡ sendo criado corretamente

### **âŒ Se o Teste 3A falhar:**
- **Problema:** Estado nÃ£o estÃ¡ sendo alterado
- **PossÃ­veis causas:**
  - Evento Global Right Pressed nÃ£o estÃ¡ funcionando
  - `global.unidade_a_comandar` nÃ£o estÃ¡ definido
  - Rota estÃ¡ vazia

### **âŒ Se o Teste 3B falhar:**
- **Problema:** MÃ¡quina de estados nÃ£o estÃ¡ funcionando
- **PossÃ­veis causas:**
  - `case "patrulhando":` nÃ£o existe
  - Nome do estado estÃ¡ escrito incorretamente
  - Switch statement nÃ£o estÃ¡ sendo executado

---

## ğŸ“Š **FLUXO DE DEBUG ESPERADO:**

### **âœ… SequÃªncia de Sucesso Completa:**
```
ğŸ¯ Unidade selecionada - ID: 100021 | Estado: livre
[TESTE 1] Ordem para criar menu. Enviando meu ID: 100021
ğŸ“» CONEXÃƒO CRÃTICA - Menu recebeu ID da unidade: 100021
ğŸ¯ CLIQUE NO BOTÃƒO PATRULHAR!
ğŸ“» TRANSMITINDO ORDEM para unidade ID: 100021
[TESTE 2] BotÃ£o Patrulhar clicado! Ativando modo para unidade: 100021
âœ… Ordem de patrulha enviada para a unidade: 100021
ğŸ¯ UNIDADE RECEBEU ORDEM DE PATRULHA - ID: 100021
ğŸ“ Ponto de patrulha adicionado em: (200, 300)
ğŸ“ Ponto de patrulha adicionado em: (400, 300)
[TESTE 3A] Rota finalizada. Estado da unidade 100021 mudado para 'patrulhando'.
ğŸ”„ Rota de patrulha finalizada. Iniciando patrulha.
[TESTE 3B] Unidade 100021 estÃ¡ executando o estado 'patrulhando'.
[TESTE 3B] Unidade 100021 estÃ¡ executando o estado 'patrulhando'.
[TESTE 3B] Unidade 100021 estÃ¡ executando o estado 'patrulhando'.
```

---

## ğŸ¯ **INSTRUÃ‡Ã•ES PARA O USUÃRIO:**

### **ğŸ“‹ Passo a Passo:**
1. **Execute o jogo**
2. **Crie uma unidade** (via quartel)
3. **Clique na unidade** â†’ Verifique Teste 1
4. **Clique em PATRULHAR** â†’ Verifique Teste 2
5. **Adicione pontos** (clique esquerdo)
6. **Finalize** (clique direito) â†’ Verifique Teste 3A e 3B

### **ğŸ“ RelatÃ³rio:**
- **Anote** quais testes passaram
- **Identifique** onde a cadeia quebra
- **Reporte** as mensagens de erro especÃ­ficas

---

## âœ… **STATUS: ESPIÃ•ES ATIVOS**

### **ğŸ¯ PrÃ³ximos Passos:**
1. **Execute os testes** na ordem especificada
2. **Identifique** qual elo estÃ¡ quebrado
3. **Reporte** os resultados para correÃ§Ã£o especÃ­fica

**Os espiÃµes estÃ£o posicionados e prontos para identificar a falha na cadeia de comando!** ğŸ”ğŸ“»ğŸ”„
